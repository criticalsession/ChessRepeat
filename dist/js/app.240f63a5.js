(function(){var e={659:function(e,t,i){"use strict";var s=i(144),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("Board",{ref:"board",attrs:{pov:e.pov,FEN:e.FEN,tileSize:e.tileSize}}),i("div",{staticStyle:{top:"20px",position:"relative"}},[i("button",{on:{click:function(t){return e.switchPOV()}}},[e._v("Flip")]),e._v(" "),i("button",{on:{click:function(t){return e.setFEN("rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR")}}},[e._v("Start Position")]),e._v(" FEN: "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.FEN,expression:"FEN"}],staticStyle:{width:"400px"},domProps:{value:e.FEN},on:{input:function(t){t.target.composing||(e.FEN=t.target.value)}}}),i("br"),i("br"),e._v(" Size: "),i("button",{on:{click:function(t){e.tileSize=50}}},[e._v("Small")]),e._v(" "),i("button",{on:{click:function(t){e.tileSize=70}}},[e._v("Medium")]),e._v(" "),i("button",{on:{click:function(t){e.tileSize=90}}},[e._v("Large")])])],1)},n=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"board",style:e.boardWidthHeight},[i("BoardTiles",{staticStyle:{position:"absolute",top:"0",left:"0"},attrs:{tileSize:e.tileSize,pov:e.pov}}),i("Pieces",{ref:"piecesHandler",staticStyle:{position:"absolute",top:"0",left:"0"},attrs:{pov:e.pov,tileSize:e.tileSize,pieceList:e.pieces,startWhiteToMove:e.whiteToMove,allowAnimate:e.animatePieces},on:{updatedPieceList:e.updatePieces}})],1)},l=[],c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",e._l(8,(function(t){return i("div",{key:t,staticClass:"row"},e._l(8,(function(s){return i("BoardTile",{key:t+s,attrs:{row:t,column:s,pov:e.pov}})})),1)})),0)},a=[],p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tile",class:{white:(e.column+e.row)%2===0},style:e.sizeStyle},[1===e.column||8===e.row?i("div",[i("div",e._b({staticClass:"colDisplay tileMarker"},"div",e.colDisplayTopStyle,!1),[e._v(e._s(e.colDisplay))]),i("div",{staticClass:"rowDisplay tileMarker"},[e._v(e._s(e.rowDisplay))])]):e._e()])},u=[],h={name:"BoardTile",data(){return{}},methods:{alphabetFromNumber(e){return(e+9).toString(36)}},props:{row:Number,column:Number,pov:Number,tileSize:Number},computed:{colDisplay(){return 8!==this.row?null:this.alphabetFromNumber(this.povColumn)},rowDisplay(){return 1!==this.column?null:this.povRow},povRow(){return 0===this.pov?this.row:9-this.row},povColumn(){return 1===this.pov?this.column:9-this.column},sizeStyle(){return{width:this.tileSize+"px",height:this.tileSize+"px"}},colDisplayTopStyle(){return{top:this.tileSize-20+"px"}}}},d=h,v=i(736),m=(0,v.Z)(d,p,u,!1,null,"0d830171",null),f=m.exports,g={name:"BoardTiles",props:{pov:Number,tileSize:Number},components:{BoardTile:f},data(){return{}},methods:{},watch:{},mounted(){}},w=g,P=(0,v.Z)(w,c,a,!1,null,"10485de8",null),b=P.exports,S=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[e._l(64,(function(t){return i("TileTarget",{key:"tile"+t,attrs:{coords:e.getCoords64(t),hasPrevious:e.findPrevious(t),hasLastMoved:e.findLastMoved(t),isSelected:e.isTileSelected(t),allowAnimate:e.allowAnimate,tileSize:e.tileSize},on:{tileClicked:function(i){return e.tileClicked(t)}}})})),e._l(e.pieces,(function(t,s){return i("PieceImage",{key:"piece"+s,attrs:{piece:t,pov:e.pov,allowAnimate:e.allowAnimate,tileSize:e.tileSize}})}))],2)},y=[],k=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tile",style:e.getPosition(),on:{click:e.selectTile}},[null===e.piece||e.piece.captured?e._e():s("div",{staticClass:"piece",style:e.piecePosition},[s("img",{style:e.pieceImageHeight,attrs:{src:i(143)("./"+e.getImage())}})])])},N=[],_=i(796);class x{isPawn(e){return e.type===x.PAWN}isHorsey(e){return e.type===x.HORSEY}isBishop(e){return e.type===x.BISHOP}isRook(e){return e.type===x.ROOK}isQueen(e){return e.type===x.QUEEN}isKing(e){return e.type===x.KING}isWhite(e){return 1===e.color}}(0,_.Z)(x,"PAWN",1),(0,_.Z)(x,"HORSEY",2),(0,_.Z)(x,"BISHOP",3),(0,_.Z)(x,"ROOK",4),(0,_.Z)(x,"QUEEN",5),(0,_.Z)(x,"KING",6);var T={name:"PieceImage",props:{piece:Object,hasPrevious:Boolean,pov:Number,allowAnimate:Boolean,tileSize:Number},components:{},data(){return{}},methods:{getImage(){let e="";if(null===this.piece||void 0===this.piece)return null;switch(this.piece.type){case x.PAWN:e="pawn";break;case x.HORSEY:e="horsey";break;case x.BISHOP:e="bishop";break;case x.ROOK:e="rook";break;case x.QUEEN:e="queen";break;case x.KING:e="king";break}return 1===this.piece.color&&(e+="_w"),e+=".png",e},selectTile(){this.$emit("tileClicked",this.piece)},getPosition(){return{top:(this.povY-1)*this.tileSize+"px",left:(this.povX-1)*this.tileSize+"px","z-index":(new x).isHorsey(this.piece)?8:6,transition:this.allowAnimate?"all 0.2s":"none",width:this.tileSize+"px",height:this.tileSize+"px"}}},computed:{povX(){return 1===this.pov?this.piece.positionX:9-this.piece.positionX},povY(){return 1===this.pov?this.piece.positionY:9-this.piece.positionY},piecePosition(){return{top:this.tileSize/2-this.tileSize/2.5+"px"}},pieceImageHeight(){return{height:this.tileSize/1.25+"px"}}},watch:{},mounted(){}},E=T,z=(0,v.Z)(E,k,N,!1,null,"01653cbd",null),O=z.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tile",class:{selected:e.isSelected,hasPrevious:e.hasPrevious,lastMoved:e.hasLastMoved},style:e.getPosition(),on:{click:e.selectTile}})},M=[],A={name:"PieceImage",props:{hasPrevious:Boolean,hasLastMoved:Boolean,isSelected:Boolean,coords:Object,allowAnimate:Boolean,tileSize:Number},components:{},data(){return{}},methods:{selectTile(){this.$emit("tileClicked",this.piece)},getPosition(){return{top:(this.coords.y-1)*this.tileSize+"px",left:(this.coords.x-1)*this.tileSize+"px",transition:this.allowAnimate?"all 0.2s":"none",width:this.tileSize+"px",height:this.tileSize+"px"}}},computed:{},watch:{},mounted(){}},B=A,F=(0,v.Z)(B,C,M,!1,null,"46abf592",null),I=F.exports,j={name:"PiecesManager",props:{pov:Number,allowAnimate:Boolean,tileSize:Number},components:{PieceImage:O,TileTarget:I},data(){return{pieces:[],whiteToMove:!0}},methods:{getTileRef(e){return"tile"+e},reset(e,t){this.pieces=e,this.whiteToMove=t},getCoords64(e){e-=1;const t=e%8+1,i=parseInt(e/8)+1;return{x:t,y:i}},getPiece(e,t){let i=this.activePieces.filter((i=>i.positionX===(1===this.pov?e:9-e)&&i.positionY===(1===this.pov?t:9-t)));return i.length>0?i[0]:null},clearSelections(){this.pieces.forEach((e=>{e.isSelected=!1}))},clearPreviousPositions(){this.pieces.forEach((e=>{e.previousPosition=[],e.lastMoved=!1}))},pieceCorrectColor(e){return 0===e.color&&!this.whiteToMove||1===e.color&&this.whiteToMove},tileClicked(e){const t=this.getCoords64(e);let i=this.getPiece(t.x,t.y),s=this.selectedPiece;null!==i&&this.pieceCorrectColor(i)?(this.clearSelections(),i.isSelected=!0):null!==s&&this.tryMovePiece(t.x,t.y,s),this.$emit("updatePieceList",this.pieces,this.whiteToMove)},capturePiece(e){e.captured=!0},tryMovePiece(e,t,i){let s=this.getPiece(e,t);null!==s&&this.capturePiece(s),this.movePieceTo(i,e,t)},movePieceTo(e,t,i){let s=this.adjustXYToAbsolute(t,i);this.clearPreviousPositions(),null!==e&&(e.previousPosition=[e.positionX,e.positionY],e.positionX=s[0],e.positionY=s[1],e.movedOnce=!0,e.lastMoved=!0),this.clearSelections(),this.whiteToMove=!this.whiteToMove},adjustToAbsolute(e){return 0===this.pov?9-e:e},adjustXYToAbsolute(e,t){let i=[e,t];return 0===this.pov&&(i=[9-e,9-t]),i},findPrevious(e){const t=this.getCoords64(e);let i=this.pieces.filter((e=>e.previousPosition[0]===this.adjustToAbsolute(t.x)&&e.previousPosition[1]===this.adjustToAbsolute(t.y)));return i.length>0},findLastMoved(e){const t=this.getCoords64(e);let i=this.pieces.filter((e=>e.positionX===this.adjustToAbsolute(t.x)&&e.positionY===this.adjustToAbsolute(t.y)&&e.lastMoved));return i.length>0},isTileSelected(e){if(null!==this.selectedPiece){const t=this.getCoords64(e);let i=this.pieces.filter((e=>e.positionX===this.adjustToAbsolute(t.x)&&e.positionY===this.adjustToAbsolute(t.y)&&e.isSelected));return i.length>0}}},computed:{selectedPiece(){let e=this.pieces.filter((e=>e.isSelected));return 0===e.length?null:e[0]},activePieces(){return this.pieces.filter((e=>!e.captured))}},watch:{},mounted(){}},H=j,R=(0,v.Z)(H,S,y,!1,null,"110a33a9",null),Y=R.exports;class Z{convert(e){let t=1,i=1,s=[];for(let o of e)switch(o){case"/":i++,t=1;break;case"p":s.push(this.newPiece(t,i,x.PAWN,0)),t++;break;case"P":s.push(this.newPiece(t,i,x.PAWN,1)),t++;break;case"n":s.push(this.newPiece(t,i,x.HORSEY,0)),t++;break;case"N":s.push(this.newPiece(t,i,x.HORSEY,1)),t++;break;case"b":s.push(this.newPiece(t,i,x.BISHOP,0)),t++;break;case"B":s.push(this.newPiece(t,i,x.BISHOP,1)),t++;break;case"r":s.push(this.newPiece(t,i,x.ROOK,0)),t++;break;case"R":s.push(this.newPiece(t,i,x.ROOK,1)),t++;break;case"q":s.push(this.newPiece(t,i,x.QUEEN,0)),t++;break;case"Q":s.push(this.newPiece(t,i,x.QUEEN,1)),t++;break;case"k":s.push(this.newPiece(t,i,x.KING,0)),t++;break;case"K":s.push(this.newPiece(t,i,x.KING,1)),t++;break;default:t+=parseInt(o);break}return s}newPiece(e,t,i,s){return{positionX:e,positionY:t,type:i,color:s,isSelected:!1,previousPosition:[],movedOnce:!1,captured:!1}}}var K={name:"BoardContainer",props:{pov:Number},components:{BoardTiles:b,Pieces:Y},data(){return{whiteToMove:!0,pieces:[],tileSize:70,animatePieces:!0}},methods:{loadFEN(e){if(e.length>0){let t=new Z;this.pieces=t.convert(e)}this.whiteToMove=!0,this.pauseAnimation(),this.$refs["piecesHandler"].reset(this.pieces,this.whiteToMove)},updatePieces(e,t){this.pieces=e,this.whiteToMove=t},pauseAnimation(){this.animatePieces=!1,setTimeout((()=>{this.animatePieces=!0}),500)}},computed:{boardWidthHeight(){return{width:8*this.tileSize+"px",height:8*this.tileSize+"px"}}},watch:{pov(){this.pauseAnimation()},tileSize(){this.pauseAnimation()}},mounted(){}},$=K,X=(0,v.Z)($,r,l,!1,null,null,null),D=X.exports,L={name:"app",components:{Board:D},methods:{switchPOV(){this.pov=1===this.pov?0:1},setFEN(e){this.FEN=e,this.$refs["board"].loadFEN(this.FEN)}},data(){return{pov:1,FEN:"",tileSize:70}},watch:{FEN(){this.$refs["board"].loadFEN(this.FEN)}},mounted(){this.setFEN("r1b1k1nr/p2p1pNp/n2B4/1p1NP2P/6P1/3P1Q2/P1P1K3/q5b1")}},Q=L,W=(0,v.Z)(Q,o,n,!1,null,null,null),q=W.exports;s.Z.config.productionTip=!0,new s.Z({render:e=>e(q)}).$mount("#app")},143:function(e,t,i){var s={"./bishop.png":328,"./bishop_w.png":373,"./horsey.png":466,"./horsey_w.png":884,"./king.png":885,"./king_w.png":422,"./pawn.png":592,"./pawn_w.png":907,"./queen.png":900,"./queen_w.png":368,"./rook.png":223,"./rook_w.png":407};function o(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=n,e.exports=o,o.id=143},328:function(e,t,i){"use strict";e.exports=i.p+"img/bishop.f0a4b241.png"},373:function(e,t,i){"use strict";e.exports=i.p+"img/bishop_w.169b9288.png"},466:function(e,t,i){"use strict";e.exports=i.p+"img/horsey.504920d4.png"},884:function(e,t,i){"use strict";e.exports=i.p+"img/horsey_w.660812b5.png"},885:function(e,t,i){"use strict";e.exports=i.p+"img/king.422328cf.png"},422:function(e,t,i){"use strict";e.exports=i.p+"img/king_w.61477a16.png"},592:function(e,t,i){"use strict";e.exports=i.p+"img/pawn.48a68a52.png"},907:function(e,t,i){"use strict";e.exports=i.p+"img/pawn_w.590c7c83.png"},900:function(e,t,i){"use strict";e.exports=i.p+"img/queen.c93bc5ae.png"},368:function(e,t,i){"use strict";e.exports=i.p+"img/queen_w.a30ae340.png"},223:function(e,t,i){"use strict";e.exports=i.p+"img/rook.f081f021.png"},407:function(e,t,i){"use strict";e.exports=i.p+"img/rook_w.f47210e3.png"}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}i.m=e,function(){var e=[];i.O=function(t,s,o,n){if(!s){var r=1/0;for(p=0;p<e.length;p++){s=e[p][0],o=e[p][1],n=e[p][2];for(var l=!0,c=0;c<s.length;c++)(!1&n||r>=n)&&Object.keys(i.O).every((function(e){return i.O[e](s[c])}))?s.splice(c--,1):(l=!1,n<r&&(r=n));if(l){e.splice(p--,1);var a=o();void 0!==a&&(t=a)}}return t}n=n||0;for(var p=e.length;p>0&&e[p-1][2]>n;p--)e[p]=e[p-1];e[p]=[s,o,n]}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.p="/"}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,r=s[0],l=s[1],c=s[2],a=0;if(r.some((function(t){return 0!==e[t]}))){for(o in l)i.o(l,o)&&(i.m[o]=l[o]);if(c)var p=c(i)}for(t&&t(s);a<r.length;a++)n=r[a],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(p)},s=self["webpackChunkchess_repeat"]=self["webpackChunkchess_repeat"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(659)}));s=i.O(s)})();
//# sourceMappingURL=app.240f63a5.js.map